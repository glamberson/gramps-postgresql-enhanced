2025-08-04 20:19:40 - root - INFO - setup_logging:64 - ================================================================================
2025-08-04 20:19:40 - root - INFO - setup_logging:65 - PostgreSQL Enhanced Test Suite
2025-08-04 20:19:40 - root - INFO - setup_logging:66 - Started: 2025-08-04 20:19:40.204795
2025-08-04 20:19:40 - root - INFO - setup_logging:67 - Log file: /home/greg/gramps-postgresql-enhanced/test_logs/test_run_20250804_201940.log
2025-08-04 20:19:40 - root - INFO - setup_logging:68 - Debug mode: True
2025-08-04 20:19:40 - root - INFO - setup_logging:69 - Python: 3.13.5 (main, Jun 25 2025, 18:55:22) [GCC 14.2.0]
2025-08-04 20:19:40 - root - INFO - setup_logging:70 - ================================================================================
2025-08-04 20:19:40 - .gramps.gen.utils.grampslocale - DEBUG - _init_from_environment:274 - The locale tformat for 'en_US' is '%m/%d/%Y'
2025-08-04 20:19:40 - .gramps.gen.utils.grampslocale - DEBUG - __init_first_instance:326 - Setting encoding to UTF-8
2025-08-04 20:19:40 - root - ERROR - main:207 - Unexpected error during tests
Traceback (most recent call last):
  File "/home/greg/gramps-postgresql-enhanced/postgresqlenhanced.py", line 292, in _initialize
    self.dbapi = PostgreSQLConnection(connection_string, username, password)
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/greg/gramps-postgresql-enhanced/connection.py", line 92, in __init__
    self._create_connection(conninfo)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/greg/gramps-postgresql-enhanced/connection.py", line 184, in _create_connection
    self._connection = psycopg.connect(conninfo)
                       ~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/usr/lib/python3/dist-packages/psycopg/connection.py", line 117, in connect
    raise last_ex.with_traceback(None)
psycopg.OperationalError: connection is bad: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: No such file or directory
	Is the server running locally and accepting connections on that socket?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/greg/gramps-postgresql-enhanced/run_tests.py", line 192, in main
    success = run_all_tests()
  File "/home/greg/gramps-postgresql-enhanced/run_tests.py", line 125, in run_all_tests
    tester.run_all_tests()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/home/greg/gramps-postgresql-enhanced/test_postgresql_enhanced.py", line 135, in run_all_tests
    self.setup()
    ~~~~~~~~~~^^
  File "/home/greg/gramps-postgresql-enhanced/test_postgresql_enhanced.py", line 105, in setup
    self.db.load(self.test_dir, None, None)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/greg/gramps-postgresql-enhanced/postgresqlenhanced.py", line 342, in load
    self._initialize(directory, actual_username, actual_password)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/greg/gramps-postgresql-enhanced/postgresqlenhanced.py", line 294, in _initialize
    raise DbConnectionError(str(e), connection_string)
gramps.gen.db.exceptions.DbConnectionError: Database connection failed.

connection is bad: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: No such file or directory
	Is the server running locally and accepting connections on that socket?
Please check your connection settings file:
/tmp/gramps_test_1754327980
